<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply Now - School Management System</title>
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/layout.css">
    <style>
        body { margin: 0; padding: 0; background-color: var(--color-bg-secondary); }
        .navbar { background-color: var(--color-bg-primary); box-shadow: var(--shadow-sm); position: sticky; top: 0; z-index: 100; }
        .navbar-container { max-width: 1400px; margin: 0 auto; padding: var(--spacing-4) var(--spacing-6); display: flex; justify-content: space-between; align-items: center; }
        .navbar-brand { display: flex; align-items: center; gap: var(--spacing-3); text-decoration: none; color: var(--color-text-primary); }
        .navbar-brand-text { font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); color: var(--color-primary); }
        .navbar-menu { display: flex; gap: var(--spacing-6); align-items: center; list-style: none; margin: 0; padding: 0; }
        .navbar-link { text-decoration: none; color: var(--color-text-secondary); font-weight: var(--font-weight-medium); font-size: var(--font-size-sm); transition: color var(--transition-fast); }
        .navbar-link:hover { color: var(--color-primary); }
        .navbar-actions { display: flex; gap: var(--spacing-3); }
        .hero { background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%); color: var(--color-text-inverse); padding: var(--spacing-12) var(--spacing-6); text-align: center; }
        .hero-container { max-width: 800px; margin: 0 auto; }
        .hero h1 { font-family: var(--font-family-heading); font-size: var(--font-size-4xl); font-weight: var(--font-weight-bold); margin: 0; line-height: var(--line-height-tight); }
        .form-container { max-width: 900px; margin: 0 auto; padding: var(--spacing-12) var(--spacing-6); }
        .form-section { background: var(--color-bg-primary); border-radius: var(--radius-lg); padding: var(--spacing-8); margin-bottom: var(--spacing-6); box-shadow: var(--shadow-md); }
        .form-section h2 { font-family: var(--font-family-heading); font-size: var(--font-size-2xl); font-weight: var(--font-weight-semibold); color: var(--color-text-primary); margin: 0 0 var(--spacing-6) 0; padding-bottom: var(--spacing-4); border-bottom: 2px solid var(--color-border); }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-6); margin-bottom: var(--spacing-6); }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-weight: var(--font-weight-medium); color: var(--color-text-primary); font-size: var(--font-size-sm); margin-bottom: var(--spacing-2); }
        .form-group input,.form-group select { padding: var(--spacing-3) var(--spacing-4); border: 1px solid var(--color-border); border-radius: var(--radius-md); font-family: var(--font-family-body); font-size: var(--font-size-base); color: var(--color-text-primary); background-color: var(--color-bg-secondary); transition: border-color var(--transition-fast), box-shadow var(--transition-fast); }
        .form-group input:focus,.form-group select:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1); }
        .form-group input.error,.form-group select.error { border-color: var(--color-error); }
        .form-error { color: var(--color-error); font-size: var(--font-size-xs); margin-top: var(--spacing-2); display: none; }
        .form-group.has-error .form-error { display: block; }
        .alert { padding: var(--spacing-4) var(--spacing-6); border-radius: var(--radius-md); margin-bottom: var(--spacing-6); display: none; }
        .alert-success { background-color: rgba(76, 175, 80, 0.1); border-left: 4px solid var(--color-success); color: var(--color-success); }
        .alert-error { background-color: rgba(244, 67, 54, 0.1); border-left: 4px solid var(--color-error); color: var(--color-error); }
        .form-actions { display: flex; gap: var(--spacing-4); justify-content: center; margin-top: var(--spacing-8); }
        .form-actions button { padding: var(--spacing-3) var(--spacing-6); border: none; border-radius: var(--radius-md); font-weight: var(--font-weight-medium); cursor: pointer; transition: transform var(--transition-fast), box-shadow var(--transition-fast); font-size: var(--font-size-base); }
        .btn-submit { background-color: var(--color-primary); color: var(--color-text-inverse); }
        .btn-submit:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
        .btn-reset { background-color: var(--color-bg-secondary); color: var(--color-text-primary); border: 1px solid var(--color-border); }
        .btn-reset:hover { background-color: var(--color-border); }
        .footer { background-color: var(--color-text-primary); color: var(--color-text-inverse); padding: var(--spacing-12) var(--spacing-6); margin-top: var(--spacing-16); }
        .footer-container { max-width: 1400px; margin: 0 auto; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--spacing-8); margin-bottom: var(--spacing-8); }
        .footer-section h4 { font-family: var(--font-family-heading); font-size: var(--font-size-lg); font-weight: var(--font-weight-semibold); margin: 0 0 var(--spacing-4) 0; }
        .footer-section ul { list-style: none; margin: 0; padding: 0; }
        .footer-section li { margin-bottom: var(--spacing-3); }
        .footer-section a { color: rgba(255, 255, 255, 0.8); text-decoration: none; font-size: var(--font-size-sm); transition: color var(--transition-fast); }
        .footer-section a:hover { color: var(--color-text-inverse); }
        .footer-divider { border-top: 1px solid rgba(255, 255, 255, 0.2); margin: var(--spacing-6) 0; }
        .footer-bottom { text-align: center; font-size: var(--font-size-sm); color: rgba(255, 255, 255, 0.7); padding-top: var(--spacing-6); }
        @media (max-width: 768px) {
            .navbar-container { flex-direction: column; gap: var(--spacing-4); }
            .navbar-menu { flex-direction: column; gap: var(--spacing-4); width: 100%; }
            .hero h1 { font-size: var(--font-size-2xl); }
            .form-row { grid-template-columns: 1fr; }
            .form-actions { flex-direction: column; }
        }
        @supports (--css: variables) {
            :root { --transition-fast: 200ms cubic-bezier(0.4, 0, 0.2, 1); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index-home.html" class="navbar-brand">
                <span class="navbar-brand-text">üéì School System</span>
            </a>
            <ul class="navbar-menu">
                <li><a href="index-home.html" class="navbar-link">Home</a></li>
                <li><a href="about-us.html" class="navbar-link">About</a></li>
                <li><a href="apply.html" class="navbar-link">Apply</a></li>
                <li><a href="contact.html" class="navbar-link">Contact</a></li>
            </ul>
            <div class="navbar-actions">
                <a href="pages/login-new.html" class="btn btn-outline">Sign In</a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-container">
            <h1>Application Form</h1>
        </div>
    </section>

    <div class="form-container">
        <div class="alert alert-success" id="successAlert">
            <strong>Success!</strong> Your application has been submitted successfully. We'll review it and contact you soon.
        </div>
        <div class="alert alert-error" id="errorAlert">
            <strong>Error!</strong> <span id="errorMessage">Please check the form for errors.</span>
        </div>

        <form id="applicationForm">
            <!-- Student Information -->
            <div class="form-section">
                <h2>üìã Student Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name *</label>
                        <input type="text" id="firstName" name="firstName" required>
                        <span class="form-error">First name is required</span>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name *</label>
                        <input type="text" id="lastName" name="lastName" required>
                        <span class="form-error">Last name is required</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="dob">Date of Birth *</label>
                        <input type="date" id="dob" name="dob" required>
                        <span class="form-error">Date of birth is required</span>
                    </div>
                    <div class="form-group">
                        <label for="gender">Gender *</label>
                        <select id="gender" name="gender" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select>
                        <span class="form-error">Please select a gender</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                        <span class="form-error">Please enter a valid email</span>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number *</label>
                        <input type="tel" id="phone" name="phone" required>
                        <span class="form-error">Phone must be at least 10 digits</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="currentSchool">Current School *</label>
                        <input type="text" id="currentSchool" name="currentSchool" required>
                        <span class="form-error">Current school is required</span>
                    </div>
                    <div class="form-group">
                        <label for="currentGrade">Current Grade *</label>
                        <select id="currentGrade" name="currentGrade" required>
                            <option value="">Select Grade</option>
                            <option value="1">Grade 1</option>
                            <option value="2">Grade 2</option>
                            <option value="3">Grade 3</option>
                            <option value="4">Grade 4</option>
                            <option value="5">Grade 5</option>
                            <option value="6">Grade 6</option>
                            <option value="7">Grade 7</option>
                            <option value="8">Grade 8</option>
                            <option value="9">Grade 9</option>
                            <option value="10">Grade 10</option>
                            <option value="11">Grade 11</option>
                            <option value="12">Grade 12</option>
                        </select>
                        <span class="form-error">Please select a grade</span>
                    </div>
                </div>
            </div>

            <!-- Parent/Guardian Information -->
            <div class="form-section">
                <h2>üë®‚Äçüë©‚Äçüëß Parent/Guardian Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="parentName">Parent/Guardian Name *</label>
                        <input type="text" id="parentName" name="parentName" required>
                        <span class="form-error">Parent name is required</span>
                    </div>
                    <div class="form-group">
                        <label for="parentEmail">Parent Email *</label>
                        <input type="email" id="parentEmail" name="parentEmail" required>
                        <span class="form-error">Please enter a valid parent email</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="parentPhone">Parent Phone *</label>
                        <input type="tel" id="parentPhone" name="parentPhone" required>
                        <span class="form-error">Parent phone must be at least 10 digits</span>
                    </div>
                    <div class="form-group">
                        <label for="occupation">Occupation</label>
                        <input type="text" id="occupation" name="occupation">
                    </div>
                </div>
            </div>

            <!-- Address Information -->
            <div class="form-section">
                <h2>üìç Address Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="street">Street Address *</label>
                        <input type="text" id="street" name="street" required>
                        <span class="form-error">Street address is required</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="city">City *</label>
                        <input type="text" id="city" name="city" required>
                        <span class="form-error">City is required</span>
                    </div>
                    <div class="form-group">
                        <label for="state">State/Province *</label>
                        <input type="text" id="state" name="state" required>
                        <span class="form-error">State is required</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="zip">Zip/Postal Code *</label>
                        <input type="text" id="zip" name="zip" required>
                        <span class="form-error">Zip code is required</span>
                    </div>
                    <div class="form-group">
                        <label for="country">Country *</label>
                        <input type="text" id="country" name="country" required>
                        <span class="form-error">Country is required</span>
                    </div>
                </div>
            </div>

            <!-- Additional Information -->
            <div class="form-section">
                <h2>üìù Additional Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="interests">Interests</label>
                        <textarea id="interests" name="interests" rows="3" style="font-family: var(--font-family-body); padding: var(--spacing-3) var(--spacing-4); border: 1px solid var(--color-border); border-radius: var(--radius-md); resize: vertical;"></textarea>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="achievements">Achievements/Awards</label>
                        <textarea id="achievements" name="achievements" rows="3" style="font-family: var(--font-family-body); padding: var(--spacing-3) var(--spacing-4); border: 1px solid var(--color-border); border-radius: var(--radius-md); resize: vertical;"></textarea>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="additionalInfo">Additional Information</label>
                        <textarea id="additionalInfo" name="additionalInfo" rows="3" style="font-family: var(--font-family-body); padding: var(--spacing-3) var(--spacing-4); border: 1px solid var(--color-border); border-radius: var(--radius-md); resize: vertical;"></textarea>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">Submit Application</button>
                <button type="reset" class="btn-reset">Clear Form</button>
            </div>
        </form>
    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>About School</h4>
                    <ul>
                        <li><a href="about-us.html">Our Mission</a></li>
                        <li><a href="about-us.html">Our Story</a></li>
                        <li><a href="about-us.html">Leadership</a></li>
                        <li><a href="about-us.html">Facilities</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="apply.html">Apply Now</a></li>
                        <li><a href="#">Admissions FAQ</a></li>
                        <li><a href="#">Programs</a></li>
                        <li><a href="#">Events</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                        <li><a href="#">Disclaimer</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Connect With Us</h4>
                    <ul>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="#">Facebook</a></li>
                        <li><a href="#">Twitter</a></li>
                        <li><a href="#">Instagram</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-divider"></div>
            <div class="footer-bottom">
                <p>&copy; 2026 School System. All rights reserved. | Empowering Education Globally</p>
            </div>
        </div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/tenant-theme.js"></script>
    <script>
        const form = document.getElementById('applicationForm');
        const successAlert = document.getElementById('successAlert');
        const errorAlert = document.getElementById('errorAlert');
        const errorMessage = document.getElementById('errorMessage');

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const digits = phone.replace(/\D/g, '');
            return digits.length >= 10;
        }

        function validateForm() {
            let isValid = true;
            const formGroups = form.querySelectorAll('.form-group');

            formGroups.forEach(group => {
                const input = group.querySelector('input, select, textarea');
                if (!input) return;

                const value = input.value.trim();
                const fieldName = input.name;
                let fieldValid = true;

                // Required field validation
                if (input.required && !value) {
                    fieldValid = false;
                } else if (fieldName === 'email' && value && !validateEmail(value)) {
                    fieldValid = false;
                } else if (fieldName === 'parentEmail' && value && !validateEmail(value)) {
                    fieldValid = false;
                } else if (fieldName === 'phone' && value && !validatePhone(value)) {
                    fieldValid = false;
                } else if (fieldName === 'parentPhone' && value && !validatePhone(value)) {
                    fieldValid = false;
                }

                if (!fieldValid) {
                    group.classList.add('has-error');
                    input.classList.add('error');
                    isValid = false;
                } else {
                    group.classList.remove('has-error');
                    input.classList.remove('error');
                }
            });

            return isValid;
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            successAlert.style.display = 'none';
            errorAlert.style.display = 'none';

            if (!validateForm()) {
                errorMessage.textContent = 'Please fix the errors in the form';
                errorAlert.style.display = 'block';
                return;
            }

            try {
                const formData = new FormData(form);
                const response = await fetch('/api/applications', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    successAlert.style.display = 'block';
                    form.reset();
                } else {
                    throw new Error('Server error');
                }
            } catch (error) {
                errorMessage.textContent = 'Failed to submit application. Please try again.';
                errorAlert.style.display = 'block';
            }
        });

        // Clear error state on input
        form.querySelectorAll('input, select, textarea').forEach(input => {
            input.addEventListener('change', () => {
                const group = input.closest('.form-group');
                group.classList.remove('has-error');
                input.classList.remove('error');
            });
        });
    </script>
</body>
</html>

