<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body class="dashboard">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-content">
            <a href="#" class="nav-brand">School System</a>
            <ul class="nav-menu">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#classes">My Classes</a></li>
                <li><a href="#students">Students</a></li>
                <li><a href="#grades">Grades</a></li>
                <li><a href="#schedule">Schedule</a></li>
            </ul>
            <div class="nav-user">
                <span class="user-badge" id="userRole">Teacher</span>
                <span id="userName">Loading...</span>
                <button id="logoutBtn" class="btn btn-danger">Logout</button>
            </div>
        </div>
    </nav>
    
    <!-- Dashboard Content -->
    <div class="dashboard-content">
        <div class="container">
            <h1>Teacher Dashboard</h1>
            <p>Manage your classes, students, and grades</p>
            
            <!-- Statistics -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-info">
                        <h3 id="totalClasses">0</h3>
                        <p>My Classes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üë®‚Äçüéì</div>
                    <div class="stat-info">
                        <h3 id="totalStudents">0</h3>
                        <p>Total Students</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-info">
                        <h3 id="pendingAssignments">0</h3>
                        <p>Pending Assignments</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠ê</div>
                    <div class="stat-info">
                        <h3 id="avgGrade">0</h3>
                        <p>Average Grade</p>
                    </div>
                </div>
            </div>
            
            <!-- My Classes -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Classes</h2>
                </div>
                <div class="table-container" id="classesTable">
                    <p>Loading classes...</p>
                </div>
            </div>
            
            <!-- Recent Students -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Recent Student Activity</h2>
                </div>
                <div class="table-container" id="studentsTable">
                    <p>Loading students...</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../js/utils.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            Dashboard.init(Auth.ROLES.TEACHER);
            
            loadStatistics();
            loadClasses();
            loadStudents();
        });
        
        async function loadStatistics() {
            document.getElementById('totalClasses').textContent = '4';
            document.getElementById('totalStudents').textContent = '85';
            document.getElementById('pendingAssignments').textContent = '12';
            document.getElementById('avgGrade').textContent = '87%';
        }
        
        async function loadClasses() {
            const container = document.getElementById('classesTable');
            const classes = [
                { name: 'Mathematics 101', grade: '10', students: '25', schedule: 'Mon/Wed 9:00 AM' },
                { name: 'Algebra II', grade: '11', students: '22', schedule: 'Tue/Thu 10:00 AM' },
                { name: 'Calculus', grade: '12', students: '18', schedule: 'Mon/Wed 2:00 PM' },
                { name: 'Statistics', grade: '11', students: '20', schedule: 'Fri 1:00 PM' }
            ];
            
            const columns = [
                { label: 'Class Name', field: 'name' },
                { label: 'Grade', field: 'grade' },
                { label: 'Students', field: 'students' },
                { label: 'Schedule', field: 'schedule' }
            ];
            
            container.innerHTML = Dashboard.renderTable(columns, classes);
        }
        
        async function loadStudents() {
            const container = document.getElementById('studentsTable');
            const students = [
                { name: 'Emma Wilson', class: 'Mathematics 101', lastActivity: 'Submitted Assignment 3', time: '2 hours ago' },
                { name: 'Oliver Brown', class: 'Algebra II', lastActivity: 'Completed Quiz 2', time: '5 hours ago' },
                { name: 'Sophia Martinez', class: 'Calculus', lastActivity: 'Asked Question', time: '1 day ago' }
            ];
            
            const columns = [
                { label: 'Student Name', field: 'name' },
                { label: 'Class', field: 'class' },
                { label: 'Last Activity', field: 'lastActivity' },
                { label: 'Time', field: 'time' }
            ];
            
            container.innerHTML = Dashboard.renderTable(columns, students);
        }
    </script>
</body>
</html>
