<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body class="dashboard">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-content">
            <a href="#" class="nav-brand">School System</a>
            <ul class="nav-menu">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#classes">My Classes</a></li>
                <li><a href="#assignments">Assignments</a></li>
                <li><a href="#grades">Grades</a></li>
                <li><a href="#schedule">Schedule</a></li>
            </ul>
            <div class="nav-user">
                <span class="user-badge" id="userRole">Student</span>
                <span id="userName">Loading...</span>
                <button id="logoutBtn" class="btn btn-danger">Logout</button>
            </div>
        </div>
    </nav>
    
    <!-- Dashboard Content -->
    <div class="dashboard-content">
        <div class="container">
            <h1>Student Dashboard</h1>
            <p>Track your classes, assignments, and grades</p>
            
            <!-- Statistics -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-info">
                        <h3 id="totalClasses">0</h3>
                        <p>My Classes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“</div>
                    <div class="stat-info">
                        <h3 id="pendingAssignments">0</h3>
                        <p>Pending Assignments</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">â­</div>
                    <div class="stat-info">
                        <h3 id="avgGrade">0</h3>
                        <p>Average Grade</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-info">
                        <h3 id="attendance">0%</h3>
                        <p>Attendance</p>
                    </div>
                </div>
            </div>
            
            <!-- My Classes -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Classes</h2>
                </div>
                <div class="table-container" id="classesTable">
                    <p>Loading classes...</p>
                </div>
            </div>
            
            <!-- Pending Assignments -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Pending Assignments</h2>
                </div>
                <div class="table-container" id="assignmentsTable">
                    <p>Loading assignments...</p>
                </div>
            </div>
            
            <!-- Recent Grades -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Recent Grades</h2>
                </div>
                <div class="table-container" id="gradesTable">
                    <p>Loading grades...</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../js/utils.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            Dashboard.init(Auth.ROLES.STUDENT);
            
            loadStatistics();
            loadClasses();
            loadAssignments();
            loadGrades();
        });
        
        async function loadStatistics() {
            document.getElementById('totalClasses').textContent = '6';
            document.getElementById('pendingAssignments').textContent = '4';
            document.getElementById('avgGrade').textContent = '92%';
            document.getElementById('attendance').textContent = '95%';
        }
        
        async function loadClasses() {
            const container = document.getElementById('classesTable');
            const classes = [
                { name: 'Mathematics', teacher: 'Dr. Wilson', room: '205', schedule: 'Mon/Wed 9:00 AM' },
                { name: 'English Literature', teacher: 'Ms. Anderson', room: '310', schedule: 'Tue/Thu 10:00 AM' },
                { name: 'Biology', teacher: 'Mr. Taylor', room: '105', schedule: 'Mon/Wed 11:00 AM' },
                { name: 'History', teacher: 'Dr. Martinez', room: '215', schedule: 'Tue/Thu 1:00 PM' },
                { name: 'Physical Education', teacher: 'Coach Brown', room: 'Gym', schedule: 'Fri 2:00 PM' },
                { name: 'Art', teacher: 'Ms. Davis', room: '405', schedule: 'Wed 3:00 PM' }
            ];
            
            const columns = [
                { label: 'Class', field: 'name' },
                { label: 'Teacher', field: 'teacher' },
                { label: 'Room', field: 'room' },
                { label: 'Schedule', field: 'schedule' }
            ];
            
            container.innerHTML = Dashboard.renderTable(columns, classes);
        }
        
        async function loadAssignments() {
            const container = document.getElementById('assignmentsTable');
            const assignments = [
                { class: 'Mathematics', assignment: 'Chapter 5 Homework', dueDate: '2024-02-20', status: 'Not Started' },
                { class: 'English Literature', assignment: 'Book Report', dueDate: '2024-02-22', status: 'In Progress' },
                { class: 'Biology', assignment: 'Lab Report 4', dueDate: '2024-02-25', status: 'Not Started' },
                { class: 'History', assignment: 'Research Essay', dueDate: '2024-03-01', status: 'Not Started' }
            ];
            
            const columns = [
                { label: 'Class', field: 'class' },
                { label: 'Assignment', field: 'assignment' },
                { label: 'Due Date', field: 'dueDate', render: (row) => formatDate(row.dueDate) },
                { label: 'Status', field: 'status' }
            ];
            
            container.innerHTML = Dashboard.renderTable(columns, assignments);
        }
        
        async function loadGrades() {
            const container = document.getElementById('gradesTable');
            const grades = [
                { class: 'Mathematics', assignment: 'Quiz 4', grade: 'A', date: '2024-02-15' },
                { class: 'English Literature', assignment: 'Essay 2', grade: 'A-', date: '2024-02-14' },
                { class: 'Biology', assignment: 'Lab Practical', grade: 'B+', date: '2024-02-13' },
                { class: 'History', assignment: 'Midterm Exam', grade: 'A', date: '2024-02-10' }
            ];
            
            const columns = [
                { label: 'Class', field: 'class' },
                { label: 'Assignment', field: 'assignment' },
                { label: 'Grade', field: 'grade' },
                { label: 'Date', field: 'date', render: (row) => formatDate(row.date) }
            ];
            
            container.innerHTML = Dashboard.renderTable(columns, grades);
        }
    </script>
</body>
</html>
